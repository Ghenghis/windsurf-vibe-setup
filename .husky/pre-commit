#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Pre-commit hook for windsurf-vibe-setup
# Runs quality checks before each commit

echo "ğŸ” Running pre-commit checks..."

# Run lint-staged for formatting and linting
npx lint-staged

# Run JSON validation
echo "ğŸ“„ Validating JSON files..."
node scripts/validate-json.js
if [ $? -ne 0 ]; then
  echo "âŒ JSON validation failed"
  exit 1
fi

# Run secret scanning
echo "ğŸ” Scanning for secrets..."
node scripts/scan-secrets.js
if [ $? -ne 0 ]; then
  echo "âŒ Potential secrets detected - please review"
  exit 1
fi

echo "âœ… Pre-commit checks passed"
